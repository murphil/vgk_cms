<template>
    <g class="svgBanner" :class="customStyle" :style="customCss">
        <defs>
            <radialGradient id="svgBannerFoot">
                <stop offset="0%" stop-color="rgba(0,0,0,1)"/>
                <stop offset="50%" stop-color="rgba(0,0,0,1)"/>
                <stop offset="70%" stop-color="#FFFF36"/>
                <stop offset="100%" stop-color="rgba(200,200,200,0.6)"/>
            </radialGradient>
        </defs>
        <polyline class="pcb-line"
                  :points="i"
                  v-for="i in lines"/>
        <circle :r="footerSize()"
                :cx="i[0]"
                :cy="i[1]"
                fill="url(#svgBannerFoot)"
                v-for="i in footers"
        />
        <circle :r="footerSize()*1.5"
                :cx="otherFooter[0]"
                :cy="otherFooter[1]"
                fill="url(#svgBannerFoot)"
        />
    </g>
</template>
<script>
  import C from '../../../../utils/coordinate'
  let lines = [
    { id: 1,  payload: [[23.5, 0], [23.5, 24.25], [22, 29.75]]},
    { id: 2,  payload: [[24.25, 0], [24.25, 27], [22.75, 32.5], [22.75, 46], [22, 48.75]]},
    { id: 3,  payload: [[25, 0], [25, 27], [23.5, 32.5], [23.5, 40.5]]},
    { id: 4,  payload: [[36.75, 0], [36, 2.75], [28.75, 2.75], [27.25, 8], [27.25, 27], [26.5, 29.75], [26.5, 37.75], [25.75, 40.5]]},
    { id: 5,  payload: [[37.5, 0], [36, 5.5], [29.5, 5.5], [28, 10.75], [28, 29.75]]},
    { id: 6,  payload: [[39, 0], [36.75, 8], [30.25, 8], [29.5, 10.75]]},
    { id: 7,  payload: [[39.75, 0], [36.75, 10.75], [30.75, 10.75]]},
    { id: 8,  payload: [[40.5, 0], [36.75, 13.5], [30.75, 13.5], [30, 16.25], [29, 16.25]]},
    { id: 9,  payload: [[41.25, 0], [39.75, 5.5]]},
    { id: 10, payload: [[42.75, 0], [38.25, 16.25], [32.25, 16.25], [31, 21], [31, 27], [32.25, 31.25], [32.25, 40.5]]},
    { id: 11, payload: [[43.5, 0], [38.25, 19], [32.75, 19], [32, 21.5], [32, 26.5], [33, 30]]},
    { id: 12, payload: [[44, 0], [38.25, 21.75], [33.75, 21.75], [33, 24.25]]},
    { id: 13, payload: [[44.75, 0], [38.25, 24.25], [35.25, 24.25], [33.75, 29.75], [33.75, 40.5]]},
    { id: 14, payload: [[45.5, 0], [45.5, 0.5], [38.25, 27.5], [36, 27.5], [35.25, 30.25], [35.25, 35.25]]},
    { id: 15, payload: [[46, 0], [46, 1.5], [38.5, 29.75], [36.75, 29.75], [36, 32.5], [36, 51.25]]},
    { id: 16, payload: [[46.25, 0], [46.25, 2.75], [38.75, 32], [37.27, 32], [36.75, 33.5], [36.75, 43.75], [37.5, 46]]},
    { id: 17, payload: [[47, 0], [47, 5.5], [39.75, 34], [38.25, 34], [37.75, 35.75]]},
    { id: 18, payload: [[53.75, 0], [53.75, 32.5], [59.5, 54], [62.5, 54], [63.25, 56.75]]},
    { id: 19, payload: [[55, 0], [55, 29.75], [61, 51.25], [64, 51.25], [64.5, 53], [64.5, 62.75], [63.75, 64.75]]},
    { id: 20, payload: [[55.25, 0], [55.25, 28.75], [61.25, 50.25], [64.75, 50.25], [65, 51.25], [65, 75]]},
    { id: 21, payload: [[55.5, 0], [55.5, 27.5], [61.5, 48.75], [65, 48.75], [65.5, 51.25], [65.5, 59]]},
    { id: 22, payload: [[55.75, 0], [55.75, 27], [61.5, 47], [65.5, 47], [66.25, 49.25], [66.25, 66.5]]},
    { id: 23, payload: [[56.5, 0], [56.5, 26.25], [61.75, 45.75], [65.75, 45.75], [67.75, 51.25]]},
    { id: 24, payload: [[56.75, 0], [56.75, 25.5], [62, 44.75], [67.25, 44.75], [68.75, 49.75], [68.75, 54.5], [67.25, 60]]},
    { id: 25, payload: [[57.25, 0], [57.25, 24.25], [62.25, 43.75], [67.75, 43.75], [69.25, 48.75], [69.25, 54.75], [68, 59], [68, 66.5]]},
    { id: 26, payload: [[58, 0], [58, 22.75], [60.5, 32.5]]},
    { id: 27, payload: [[58.75, 0], [58.75, 23.243], [63.25, 39.5], [69.25, 39.5], [70.25, 43.25], [71.5, 43.25]]},
    { id: 28, payload: [[59.25, 0], [59.25, 22.25], [63.25, 37.25], [69.75, 37.25]]},
    { id: 29, payload: [[59.75, 0], [59.75, 21], [63.5, 35.25], [70.25, 35.25], [70.75, 37.25]]},
    { id: 30, payload: [[60.75, 0], [60.75, 17.75], [64, 30.75], [71.75, 30.75], [73, 35.25], [73, 54.5], [74, 59], [74, 65.5], [74.7, 67.5]]},
    { id: 31, payload: [[62.75, 0], [62.75, 14.5], [65.25, 24.25], [74, 24.25], [75, 27.5], [75, 52.5], [76.25, 58.25], [76.25, 66.5]]},
    { id: 32, payload: [[63.25, 0], [63.25, 10.75], [64, 14.5], [65.25, 14.5], [65.75, 16.75]]},
    { id: 33, payload: [[63.5, 0], [63.5, 9.25], [64.5, 13], [66.5, 13], [67, 14.5], [67, 19], [67.75, 21.75]]},
    { id: 34, payload: [[63.75, 0], [63.75, 3.75], [64.25, 6], [66, 6], [67, 10.26], [68.26, 10.26], [68.5, 11.25], [68.5, 14.5], [69, 16.75], [69, 18.25], [69.75, 21.5], [74.75, 21.5], [76, 25.5], [76, 52.5], [77.25, 58.5], [77.25, 74], [78.25, 77.25]]},
    { id: 35, payload: [[64, 0], [64, 2.162], [64.75, 4.75], [66, 4.75], [67, 1], [68.25, 1], [68.75, 3.25], [68.75, 11.25], [69.5, 13.5], [70.25, 13.5], [71.5, 19], [75, 19], [76.5, 23.75], [76.5, 51.25], [78.25, 59]]}
  ]

  export default{
    name: 'svgBanner',
    props: ['content'],
    computed: {
      svg () {
        return this.$parent.$parent.$data.svg || {width: 800, height: 600}
      },
      customStyle () {
        return this.content.style
      },
      customCss () {
        return this.content.css
      },
      c () {
        return C(this.svg.width, this.svg.height)
      },
      lines() {
        return lines.map(x => {
          return x.payload.map(y => {
            let [ix, iy] = this.c.L(y[0], y[1])
            return `${ix},${iy}`
          }).join(' ')
        })
      },
      footers() {
        return lines.map(x => {
          let [px,py] = x.payload[x.payload.length - 1]
          return this.c.L(px, py)
        })
      },
      otherFooter() {
        return this.c.L(66.5, 8.25)
      }
    },
    methods : {
      footerSize() {
        return 4 + Math.random() * 2
      }
    }
  }
</script>
<style>
    .svgBanner {
        display: flex;
        flex-flow: column nowrap;
        justify-content: flex-start;
        align-items: center;
        flex: 1 1 auto;
        font-size: 12px;
    }

    .svgBanner .pcb-line {
        fill: none;
        stroke-width: 2;
        stroke-linejoin: round;
        stroke-linecap: round;
        stroke: #c3ffbf;
        stroke-dasharray: 0, 1370;
        stroke-dashoffset: 0;
        animation: lineMove 20s cubic-bezier(0, 0.8, 0.51, 1.33) forwards;
    }

    @keyframes lineMove {
        0% {
            stroke-dasharray: 0, 100%;
        }
        100% {
            stroke-dasharray: 100%, 100%;
        }
    }
</style>
